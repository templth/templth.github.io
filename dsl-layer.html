<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Optional Bootstrap Theme -->
    <link href="data:text/css;charset=utf-8," data-href="http://getbootstrap.com/dist/css/bootstrap-theme.min.css" rel="stylesheet" id="bs-theme-stylesheet">
    <!-- Documentation extras -->
    <link href="http://getbootstrap.com/assets/css/docs.min.css" rel="stylesheet">
    <!--[if lt IE 9]><script src="../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="http://getbootstrap.com/assets/js/ie-emulation-modes-warning.js"></script>
  </head>

  <body class="map" data-spy="scroll" data-target="#right-nav">
    <!-- Header -->
    <header class="navbar navbar-static-top bs-docs-nav" id="top" role="banner">
      <div class="container">
        <div class="navbar-header">
          <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="." class="navbar-brand">Geo data vizualiser</a>
        </div>
        <nav id="bs-navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li >
              <a href="/">Overview</a>
            </li>
            <li >
              <a href="web-ui.html">Web UI</a>
            </li>
            <li class="dropdown active">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">DSL <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="dsl-map.html">Map </a></li>
                <li><a href="dsl-layer.html">Layer <span class="glyphicon glyphicon-ok"></span></a></li>
                <li><a href="dsl-source.html">Source </a></li>
              </ul>
            </li>
            <li >
              <a href="web-api.html">Web API</a>
            </li>
            <li class="dropdown active">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Use cases <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="dsl-map.html">Map </a></li>
                <li><a href="dsl-layer.html">Layer <span class="glyphicon glyphicon-ok"></span></a></li>
                <li><a href="dsl-source.html">Source </a></li>
              </ul>
            </li>
            <!-- li >
              <a href="howtos.html">Howtos</a>
            </li -->
            <!-- li class="dropdown ">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tools <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="tools-map-managers.html">Map managers </a></li>
                <li><a href="tools-installing.html">Installing </a></li>
              </ul>
            </li -->
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="demo/" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Demo');">Demo</a></li>
            <li><a href="https://templth.wordpress.com/category/apispark/summer-of-api/" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Blog');">Blog</a></li>
            <li><a href="https://github.com/templth/geo-open-data-viz" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Github');">Github</a></li>
          </ul>
        </nav>
      </div>
    </header>
    <!-- End header -->

    <!-- Docs page layout -->
    <div class="bs-docs-header" id="content" tabindex="-1" style="background-image:url(banner.png); background-repeat:no-repeat;background-position:100% 0%;background-size: cover; ">
      <div class="container" style="background-color: rgba(0, 0, 0, .5);">
        <h1>Layer DSL</h1>
        <p>Configure layers using the JSON format and literal JavaScript objects.</p>
      </div>
    </div>

    <!-- Content -->
    <div class="container bs-docs-container">
      <div class="row">
        <div id="content" class="col-md-9" role="main">
          <div class="bs-docs-section">
            <h1 id="layer-configuration-parts" class="page-header">Layer configuration parts</h1>
            <h2 id="generic-informations" class="page-header">Generic informations</h2>
            <p>Some hints allow to configure the layer itself, its type and its link with maps.</p>
            <p>Here is a sample configuration of these hints:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  "id": "graticuleLayer",
  "type": "graticule",
  "rank": 1,
  "name": "Graticule",
  "applied": true,
  "visible": true,
  "maps": [
    "1"
  ],
  (...)
}</code></pre></div>
            <p>A layer can be composed with several parts that deal with specific parts. Not all are
required with each layer type.</p>
            <p style="text-align:center;"><img alt="Layer parts" src="layer-parts.png"></p>
            <h2 id="display-configuration" class="page-header">Display configuration</h2>
            <p>The display section of layers allows to configure a set of elements that will
be displayed on the map.</p>
            <p><div class="table-responsive"><table class="table table-bordered table-striped"><thead><tr><th>Feature</th><th>Description</th></tr></thead><tbody><tr></tr><tr><td><a href="#fill">Fill</a></td><td>Defines the strategy to use to fill shapes</td></tr><tr><td><a href="#shape">Shape</a></td><td>Defines shapes</td></tr><tr><td><a href="#legend">Legend</a></td><td>Defines the legend associated with a layer</td></tr><tr><td><a href="#tooltip">Tooltip</a></td><td>Defines the tooltip associated with elements of a layer</td></tr></tbody></table></div></p>
            <h3 id="fill" class="page-header">Fill</h3>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  display: {
    fill: {
      threshold: {
        values: [ 0.02, 0.04, 0.06, 0.08, 0.10 ],
        colors: [ '#f2f0f7', '#dadaeb', '#bcbddc',
                  '#9e9ac8', '#756bb1', '#54278f' ]
      },
      value: 'd.rate'
    }
  }
  (...)
}</code></pre></div>
            <h3 id="shape" class="page-header">Shape</h3>
            <p>Several kinds of shapes are supported. They all take into account the configured projection
of the map.</p>
            <p><div class="table-responsive"><table class="table table-bordered table-striped"><thead><tr><th>Shape</th><th>Description</th></tr></thead><tbody><tr></tr><tr><td><a href="#circle">Circle</a></td><td></td></tr><tr><td><a href="#polygon">Polygon</a></td><td></td></tr><tr><td><a href="#line">Line</a></td><td></td></tr></tbody></table></div></p>
            <h4 id="circle" class="page-header">Circle</h4>
            <p>Here are the supported features for the circle shape:</p>
            <p><div class="table-responsive"><table class="table table-bordered table-striped"><thead><tr><th>Feature</th><th>Value</th><th>Example</th><th>Description</th></tr></thead><tbody><tr></tr><tr><td>Origin</td><td><a href="#expressions">Expr</a></td><td><code>\[ d.reclong, d.reclat \]</code></td><td>Corresponds to the point where circles are positionned. Corresponding expressions need to leverage attributes in the dataset to define the position.</td></tr><tr><td>Radius</td><td>Val | <a href="#expressions">Expr</a></td><td><code>d.mass / 5000000</code> or <code>10</code></td><td>Corresponds to the radius of circles. It can be fixed or dependent of the attributes of the dataset.</td></tr><tr><td>Color</td><td>Val | <a href="#expressions">Expr</a></td><td></td><td>Corresponds to the color of circles. It can be the same for all circles or or dependent of the attributes of the dataset. Strategies like threshold or choropleth are supported.</td></tr><tr><td>Opacity</td><td>Val</td><td><code>0.75</code></td><td>Corresponds to the opacity of the elements. It's a value between <code>0</code> (transparent) and <code>1</code> (opaque)</td></tr></tbody></table></div></p>
            <p>The following sample describes the configuration of circles located using the attributes
<code>reclong</code> (longitude) and <code>reclat</code> (latitude) with variable radius and color. Regarding
colors, the threshold approach is chosen. In this case, an attribute <code>value</code> must be
defined to select the color to display. The threshold approach can be transparently
updated to a choropleth one.</p>
            <p>Here is a sample configuration of circles with variable radius and colors (threshold approach):</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  display: {
    shape: {
      type: 'circle',
      radius: 'd.mass / 5000000',
      origin: '[ d.reclong, d.reclat ]',
      opacity: 0.75,
      threshold: {
        paletteCode: 'YlOrRd',
        paletteReverse: false,
        values: [ 1800, 1900, 1950, 2000, 2015 ],
        colors: [ '#ffffb2', '#fed976', '#feb24c',
                  '#fd8d3c', '#f03b20', '#bd0026' ]
      },
      value: 'parseDate(d.year).getFullYear()'
    }
  }
  (...)
}</code></pre></div>
            <p>Here is a sample configuration of circles with variable radius but fixed color:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  display: {
    shape: {
      type: 'circle',
      radius: 'd.mass / 5000000',
      origin: '[ d.reclong, d.reclat ]',
      opacity: 0.75,
      color: '#ff0000'
    }
  }
  (...)
}</code></pre></div>
            <p>Here is a sample configuration of circles with variable radius but conditional colors:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  display: {
    shape: {
      type: 'circle',
      radius: 'd.mass / 5000000',
      origin: '[ d.reclong, d.reclat ]',
      opacity: 0.75,
      color: 'd.id === 240 ? #ff0000 : #000000'
    }
  }
  (...)
}</code></pre></div>
            <h4 id="polygon" class="page-header">Polygon</h4>
            <p>TODO</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  display: {
    shape: {
      type: 'polygon',
      value: 'd.points',
      pointValue: '[d.lon, d.lat]'
      threshold: {
        paletteCode: 'YlOrRd',
        paletteReverse: false,
        values: [ 1800, 1900, 1950, 2000, 2015 ],
        colors: [ '#ffffb2', '#fed976', '#feb24c',
                  '#fd8d3c', '#f03b20', '#bd0026' ]
      },
      value: 'parseDate(d.year).getFullYear()'
    }
  }
  (...)
}</code></pre></div>
            <p>Here is a sample configuration of polygons with variable radius but fixed color:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  display: {
    shape: {
      type: 'polygon',
      value: 'd.points',
      pointValue: '[d.lon, d.lat]'
      color: '#ff0000'
    }
  }
  (...)
}</code></pre></div>
            <p>Here is a sample configuration of polygons with variable radius but conditional colors:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  display: {
    shape: {
      type: 'polygon',
      value: 'd.points',
      pointValue: '[d.lon, d.lat]'
      color: 'd.id === 240 ? #ff0000 : #000000'
    }
  }
  (...)
}</code></pre></div>
            <h4 id="line" class="page-header">Line</h4>
            <p>TODO</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  display: {
    shape: {
      type: 'line',
      value: 'd.points',
      pointValue: '[d.lon, d.lat]'
    }
  }
  (...)
}</code></pre></div>
            <h3 id="legend" class="page-header">Legend</h3>
            <p>In most cases, we use a set of colors (threshold or choropleth) to display data.
This really makes sense to define a legend in such cases to tell which values
correspond to colors. In this case, we need to add a block <code>legend</code> within the <code>display</code>
one. its attribute <code>label</code> is an expression. The element <code>d</code> corresponds to the
current value of the element in the defined range.</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  display: {
    legend: {
      enabled: true,
      label: 'd'
    }
  }
  (...)
}</code></pre></div>
            <p>We can have more advanced expressions. Here is an expression for the attribute <code>label</code>
that displays pourcents.</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  display: {
    legend: {
      enabled: true,
      label: '(d * 100) + " %"'
    }
  }
  (...)
}</code></pre></div>
            <h3 id="tooltip" class="page-header">Tooltip</h3>
            <p>In most cases, we need some more details about areas or shapes. In this case,
having a tooltip is a good thing. In the case of tooltip, we need to configure
a behavior for the layer to tell when and how the tooltip will be displayed.</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  display: {
    tooltip: {
      enabled: true,
      fromScale: 300,
      text: '"Name: "+d.name+"&lt;br/&gt;Year: "+d.year+"&lt;br/&gt;Mass (g): "+d.mass',
    }
  }
  (...)
}</code></pre></div>
            <h2 id="data-configuration" class="page-header">Data configuration</h2>
            <p>Most of layers rely on data. This can be either geo data that represent
shapes, lines... but also data sets that we need to apply on a map. Such data
sets are used to deduce geo data.</p>
            <p>// TODO: add a table</p>
            <p>Here is a sample configuration of data source:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  data: {
    url: 'http://localhost:9000/scripts/json/Meteorite_Landings.csv',
    type: 'csv',
    source: 'meteoritesSource',
    id: 'name',
    where: 'd.mass > 100000',
    order: {
      field: 'mass',
      ascending: false
    }
  },
  (...)
}</code></pre></div>
            <p>Within TopoJSON files, properties can be defined for each shape. If it's not
the case, you can leverage the attribute <code>properties</code>. The link between the shape
and the additional properties is done using identifiers.</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  "data": {
    "source": "us-counties",
    "url": "\"http://localhost:9000/scripts/json/us/us-counties.json\"",
    "properties": {
      "url": "\"http://localhost:9000/scripts/json/us/us-county-names2.csv\"",
      "type": "csv"
    },
    "rootObject": "counties",
    "type": "topojson",
    "content": [],
    "loaded": false
  }
  (...)
}</code></pre></div>
            <p>Data used by the layer can be also defined inline using the attribute
<code>inline</code>. The corresponding value corresponds to a JSON object as string.
In the future, both strings and literal JSON objects will be supported.</p>
            <p>Here is a sample configuration of the inline approach:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  data: {
    inline: '[{ points: [ {lon: -74.007124, lat: 40.71455}, {lon: -118.245323, lat: 34.05349}, { lon: -92.888759, lat: 45.37399} ] }] '
  }
  (...)
}</code></pre></div>
            <h2 id="styles-configuration" class="page-header">Styles configuration</h2>
            <p>This section provides configuration regarding styles to apply
to parts of the layer. They are basically related to background,
lines and borders. But they can also apply to elements like
legends or tooltips.</p>
            <p>Here is a sample configuration of styles for layers:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  styles: {
    background: {
      fill: '#a4bac7'
    },
    border: {
      stroke: '#000',
      strokeWidth: '3px'
    },
    lines: {
      stroke: '#777',
      strokeWidth: '.5px',
      strokeOpacity: '.5'
    }
  }
  (...)
}</code></pre></div>
            <h2 id="behavior-configuration" class="page-header">Behavior configuration</h2>
            <p>This section describes the way to configure the interaction between a user and a
layer.</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  "events": {
    "click": {
      "display": "subMap"
    },
    "mouseover": {
      "display": "tooltip"
    },
    "mouseout": {
      "hide": "tooltip"
    }
  }
  (...)
}</code></pre></div>
            <h1 id="layer-kinds" class="page-header">Layer kinds</h1>
            <p>The layers leverage some of elements described in section "Generic informations" to
configure themselves. Here are the list of supported layer kinds:</p>
            <p><div class="table-responsive"><table class="table table-bordered table-striped"><thead><tr><th>Layer kind</th><th>Description</th></tr></thead><tbody><tr></tr><tr><td><a href="#graticule-layer">Graticule</a></td><td>Defines a graticule to display world background and / or  longitude / latitude lines</td></tr><tr><td><a href="#geodata-layer">Geodata</a></td><td>Displays data from TopoJSON files</td></tr><tr><td><a href="#fill-layer">Fill</a></td><td>Fills shapes based on data files</td></tr><tr><td><a href="#objects-layer">Objects</a></td><td>Displays shapes like circles or lines on maps</td></tr></tbody></table></div></p>
            <p>Following sub sections describe the way to configure these layers.</p>
            <h2 id="graticule-layer" class="page-header">Graticule layer</h2>
            <p>Sample graticule layer with lines and background color:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  id: 'graticuleLayer',
  type: 'graticule',
  rank: 1,
  name: 'Graticule',
  applyOn: 'layers',
  applied: true,
  visible: true,
  display: {
    background: true,
    lines: true,
    border: true
  },
  styles: {
    background: {
      fill: '#a4bac7'
    },
    border: {
      stroke: '#000',
      strokeWidth: '3px'
    },
    lines: {
      stroke: '#777',
      strokeWidth: '.5px',
      strokeOpacity: '.5'
    }
  }
}</code></pre></div>
            <h2 id="geodata-layer" class="page-header">Geodata layer</h2>
            <p>Sample geodata layer that display all country borders using a TopoJSON file:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  id: 'worldLayer',
  type: 'geodata',
  rank: 2,
  data: {
    url: 'http://localhost:9000/scripts/json/continent.json',
    rootObject: 'countries',
    type: 'topojson',
  },
  styles: {
    background: {
      fill: '#ff0000'
    },
    lines: {
      stroke: '#fff',
      strokeWidth: '1px',
      strokeOpacity: '1'
    }
  },
  behavior: {
    zoomBoundingBox: {
      display: 'click'
      //display: 'mouseOver',
      //hide: 'mouseOut'
    }
  },
  applyOn: 'layers',
  name: 'World',
  applied: true,
  visible: true
}</code></pre></div>
            <h2 id="fill-layer" class="page-header">Fill layer</h2>
            <p>Sample fill layer that define a specific background for each shape element
based on a threshold approach:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  id: 'layer2',
  type: 'data',
  mode: 'fill',
  rank: 7,
  data: {
    url: 'http://(...)/unemployment.tsv',
    type: 'tsv',
  },
  name: 'Unemployment rate',
  display: {
    fill: {
      threshold: {
        values: [ 0.02, 0.04, 0.06, 0.08, 0.10 ],
        colors: [ '#f2f0f7', '#dadaeb', '#bcbddc',
                  '#9e9ac8', '#756bb1', '#54278f' ]
      },
      value: 'd.rate'
    },
    legend: {
      enabled: true,
      label: '(d * 100) + " %"'
    },
    tooltip: {
      enabled: true,
      fromScale: 300,
      text: '"Value: "+value',
    }
  },
  styles: {
    legend: {
    },
    tooltip: {
    }
  },
  behavior: {
    tooltip: {
      //display: 'click'
      display: 'mouseOver',
      hide: 'mouseOut'
    }
  },
  applyOn: 'usLayer',
  applied: true,
  visible: true
}</code></pre></div>
            <h2 id="objects-layer" class="page-header">Objects layer</h2>
            <p>Sample object layer that displays circle shapes for each element of
a CSV file:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  id: 'meteorites',
  type: 'data',
  mode: 'objects',
  rank: 6,
  data: {
    url: 'http://(...)/Meteorite_Landings.csv',
    type: 'csv',
    content: [],
    loaded: false,
    id: 'name',
    where: 'd.mass < 50000',
    order: {
      field: 'mass',
      ascending: false
    }
  },
  name: 'Meteorites',
  display: {
    shape: {
      type: 'circle',
      radius: 'd.mass / 50000',
      origin: '[ d.reclong, d.reclat ]',
      opacity: 0.75,
      threshold: {
        values: [ 1800, 1900, 1950, 2000, 2015 ],
        colors: [ '#ffffb2', '#fed976', '#feb24c',
                  '#fd8d3c', '#f03b20', '#bd0026' ]
      },
      value: 'parseDate(d.year).getFullYear()'
    },
    legend: {
      enabled: true,
      label: 'd'
    },
    tooltip: {
      enabled: true,
      fromScale: 300,
      text: '"Name: "+d.name+"<br/>Year: "+d.year+"<br/>Mass (g): "+d.mass',
      event: 'click' // or over
    }
  },
  behavior: {
    tooltip: {
      display: 'click'
      //display: 'mouseOver',
      //hide: 'mouseOut'
    }
  },
  applyOn: 'layers',
  applied: true,
  visible: true
}</code></pre></div>
            <h1 id="layer-variables" class="page-header">Layer variables</h1>
            <h2 id="defining-variables" class="page-header">Defining variables</h2>
            <p>The block <code>variables</code> allows to define the set of usable variables. Each element must
be an object with the possible following attributes:</p>
            <p><div class="table-responsive"><table class="table table-bordered table-striped"><thead><tr><th>Attribute</th><th>Required</th><th>Description</th></tr></thead><tbody><tr></tr><tr><td><code>name</code></td><td>yes</td><td>The name of the attribute</td></tr><tr><td><code>type</code></td><td>yes</td><td>The type of the attribute. Supported types are primitive types (<code>string</code>, <code>integer</code>, <code>boolean</code>, <code>date</code>) but also <code>bounds</code> for the current display area, <code>object</code> for data objects and <code>geometry</code> for the current shape.</td></tr><tr><td><code>default</code></td><td>no</td><td>The default value</td></tr></tbody></table></div></p>
            <p>Following code describes how to define variables for a layer:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  id: 'meteorites',
  type: 'data',
  (...)
  variables: [
    {
      name: 'mass',
      type: 'string',
      default: 100
    },
    {
      name: 'area',
      type: 'bounds'
    },
    {
      name: 'data',
      type: 'object'
    },
    {
      name: 'geometry',
      type: 'Geometry'
    }
  ]
  (...)
}</code></pre></div>
            <h2 id="using-variables" class="page-header">Using variables</h2>
            <p>Variable values are gotten from the current context of the layer and / or the map.</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  id: 'meteorites',
  type: 'data',
  (...)
  data: {
    (...)
    where: 'mass<{mass} & lon < {area.y}'
  }
  (...)
}</code></pre></div>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  id: 'meteorites',
  type: 'data',
  (...)
  data: {
    (...)
    where: 'name == {data.name}
  }
  (...)
}</code></pre></div>
            <h2 id="defining-a-filtering-box" class="page-header">Defining a filtering box</h2>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  id: 'meteorites',
  type: 'data',
  (...)
  display: {
    (...)
    filtering: {
      fields: [
        {
          label: 'Name',
          variable: 'name'
        },
        (...)
      ]
    }
  }
  (...)
}</code></pre></div>
            <h1 id="sub-maps" class="page-header">Sub maps</h1>
            <p>TODO</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  display: {
    subMap: {
      layers: [
        'layer1',
        'layer2'
      ],
      variables: [
        bounds: 
      ]
    }
  },
  (...)
}</code></pre></div>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  (...)
  behavior: {
    subMap: {
      display: 'dblclick'
    }
  }
  (...)
}</code></pre></div>
            <h1 id="expressions" class="page-header">Expressions</h1>
            <p>Expressions allow to define objects from a particular context. This allows to configure
elements of maps like shapes and fill. Expressions are based on the ones from Angular and
follow the JavaScript syntax. </p>
            <p>See the following links for more details:</p>
            <p><ul><li><a href="https://docs.angularjs.org/guide/expression">https://docs.angularjs.org/guide/expression</a></li><li><a href="http://teropa.info/blog/2014/03/23/angularjs-expressions-cheatsheet.html">http://teropa.info/blog/2014/03/23/angularjs-expressions-cheatsheet.html</a></li></ul></p>
            <h2 id="literal-expressions" class="page-header">Literal expressions</h2>
            <p>In the case of the application, expressions allow to create objects that be used to configure
map elements. For this reason, they must correspond to values.</p>
            <p>Values can be built using literal syntax of JavaScript:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">10
10.2
"a string"
{
  attr1: 10,
  attr2: "a string"
}
[ 10, 11, 12 ]
[ "s1", "s2", "s3"]
[
  {
    attr1: 1,
    attr2: "s1"
  },
  {
    attr1: 2,
    attr2: "s2"
  }
]</code></pre></div>
            <h2 id="inline-conditions" class="page-header">Inline conditions</h2>
            <p>Inline conditions are also supported, as described below:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">d.val === 2 ? "#ff0000" : "#000000"</code></pre></div>
            <h2 id="expression-context" class="page-header">Expression context</h2>
            <p><div class="table-responsive"><table class="table table-bordered table-striped"><thead><tr><th>Element</th><th>Description</th></tr></thead><tbody><tr></tr><tr><td>d</td><td>The current element of data</td></tr><tr><td>i</td><td>In the case of list, the current index</td></tr><tr><td>parseDate</td><td>Utility function to convert string to date</td></tr></tbody></table></div></p>
            <p>Here is a sample of use of the context within expressions:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">d.mass / 5000000
[ d.reclong, d.reclat ]
parseDate(d.year).getFullYear()</code></pre></div>
          </div>
        </div>
        <div id="right-nav" class="col-md-3" role="complementary">
          <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm">
            <ul class="nav bs-docs-sidenav">
              <li>
                <a href="#layer-configuration-parts">Layer configuration parts</a>
                <ul class="nav">
                  <li><a href="#generic-informations">Generic informations</a></li>
                  <li><a href="#display-configuration">Display configuration</a></li>
                  <li><a href="#data-configuration">Data configuration</a></li>
                  <li><a href="#styles-configuration">Styles configuration</a></li>
                  <li><a href="#behavior-configuration">Behavior configuration</a></li>
                </ul>
              </li>
              <li>
                <a href="#layer-kinds">Layer kinds</a>
                <ul class="nav">
                  <li><a href="#graticule-layer">Graticule layer</a></li>
                  <li><a href="#geodata-layer">Geodata layer</a></li>
                  <li><a href="#fill-layer">Fill layer</a></li>
                  <li><a href="#objects-layer">Objects layer</a></li>
                </ul>
              </li>
              <li>
                <a href="#layer-variables">Layer variables</a>
                <ul class="nav">
                  <li><a href="#defining-variables">Defining variables</a></li>
                  <li><a href="#using-variables">Using variables</a></li>
                  <li><a href="#defining-a-filtering-box">Defining a filtering box</a></li>
                </ul>
              </li>
              <li>
                <a href="#sub-maps">Sub maps</a>
                <ul class="nav">
                </ul>
              </li>
              <li>
                <a href="#expressions">Expressions</a>
                <ul class="nav">
                  <li><a href="#literal-expressions">Literal expressions</a></li>
                  <li><a href="#inline-conditions">Inline conditions</a></li>
                  <li><a href="#expression-context">Expression context</a></li>
                </ul>
              </li>
            </ul>
            <a class="back-to-top" href="#top">
              Back to top
            </a>
          </nav>

        </div>
      </div>
    </div>
    <!-- End content-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://getbootstrap.com/dist/js/bootstrap.min.js"></script>
    <script src="http://getbootstrap.com/assets/js/docs.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="http://getbootstrap.com/assets/js/ie10-viewport-bug-workaround.js"></script>

    <!--script>
      window.twttr = (function (d,s,id) {
        var t, js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return; js=d.createElement(s); js.id=id; js.async=1;
        js.src="https://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
        return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
      }(document, "script", "twitter-wjs"));
    </script -->

    <!-- Analytics
    ================================================== -->
    <script>
      /*var _gauges = _gauges || [];
      (function() {
        var t   = document.createElement('script');
        t.async = true;
        t.id    = 'gauges-tracker';
        t.setAttribute('data-site-id', '4f0dc9fef5a1f55508000013');
        t.src = '//secure.gaug.es/track.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(t, s);
      })();*/
    </script>
  </body>
</html>