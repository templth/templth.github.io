<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Optional Bootstrap Theme -->
    <link href="data:text/css;charset=utf-8," data-href="http://getbootstrap.com/dist/css/bootstrap-theme.min.css" rel="stylesheet" id="bs-theme-stylesheet">
    <!-- Documentation extras -->
    <link href="http://getbootstrap.com/assets/css/docs.min.css" rel="stylesheet">
    <!--[if lt IE 9]><script src="../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="http://getbootstrap.com/assets/js/ie-emulation-modes-warning.js"></script>
  </head>

  <body class="map" data-spy="scroll" data-target="#right-nav">
    <!-- Header -->
    <header class="navbar navbar-static-top bs-docs-nav" id="top" role="banner">
      <div class="container">
        <div class="navbar-header">
          <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="." class="navbar-brand">Geo data vizualiser</a>
        </div>
        <nav id="bs-navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li >
              <a href="/">Overview</a>
            </li>
            <li >
              <a href="web-ui.html">Web UI</a>
            </li>
            <li class="dropdown active">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">DSL <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="dsl-map.html">Map </a></li>
                <li><a href="dsl-layer.html">Layer </a></li>
                <li><a href="dsl-source.html">Source <span class="glyphicon glyphicon-ok"></span></a></li>
              </ul>
            </li>
            <li >
              <a href="web-api.html">Web API</a>
            </li>
            <li class="dropdown active">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Use cases <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="dsl-map.html">Map </a></li>
                <li><a href="dsl-layer.html">Layer </a></li>
                <li><a href="dsl-source.html">Source <span class="glyphicon glyphicon-ok"></span></a></li>
              </ul>
            </li>
            <!-- li >
              <a href="howtos.html">Howtos</a>
            </li -->
            <!-- li class="dropdown ">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tools <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="tools-map-managers.html">Map managers </a></li>
                <li><a href="tools-installing.html">Installing </a></li>
              </ul>
            </li -->
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="demo/" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Demo');">Demo</a></li>
            <li><a href="https://templth.wordpress.com/category/apispark/summer-of-api/" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Blog');">Blog</a></li>
            <li><a href="https://github.com/templth/geo-open-data-viz" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Github');">Github</a></li>
          </ul>
        </nav>
      </div>
    </header>
    <!-- End header -->

    <!-- Docs page layout -->
    <div class="bs-docs-header" id="content" tabindex="-1" style="background-image:url(banner.png); background-repeat:no-repeat;background-position:100% 0%;background-size: cover; ">
      <div class="container" style="background-color: rgba(0, 0, 0, .5);">
        <h1>Source DSL</h1>
        <p>Configure sources using the JSON format and literal JavaScript objects.</p>
      </div>
    </div>

    <!-- Content -->
    <div class="container bs-docs-container">
      <div class="row">
        <div id="content" class="col-md-9" role="main">
          <div class="bs-docs-section">
            <h1 id="source-dsl" class="page-header">Source DSL</h1>
            <p>This part of the DSL tackles sources. This defines the structure of data used within
map layers. It's useful then to know source structures and sample datasets. In the
Web UI, the expression dialog leverages such data to hep building expressions.</p>
            <h2 id="map-sources" class="page-header">Map sources</h2>
            <p>This kind of sources provides general informations such as the URL and a sample of data,
actually the first five elements within the <code>objects</code> element:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  "id": "us-counties",
  "name": "US counties",
  "type": "map",
  "url": "https://mapapi.apispark.net/data/us-counties.json",
  "dataType": "json",
  "sample": "{
    \"type\": \"Topology\",
    \"objects\": {
      \"counties\": {
        \"type\": \"GeometryCollection\",
        \"bbox\": [
          -179.1473399999999,
          17.67439566600018,
          179.7784800000003,
          71.38921046500008
        ],
        \"geometries\": [
          {
            \"type\": \"MultiPolygon\",
            \"id\": 53073,
            \"arcs\": []
          },
          {
            \"type\": \"Polygon\",
            \"id\": 30105,
            \"arcs\": []
          },
          {
            \"type\": \"Polygon\",
            \"id\": 30029,
            \"arcs\": []
          },
          {
            \"type\": \"Polygon\",
            \"id\": 16021,
            \"arcs\": []
          },
          {
            \"type\": \"Polygon\",
            \"id\": 30071,
            \"arcs\": []
          }
        ]
      },
      \"states\": {
        \"type\": \"GeometryCollection\",
        \"geometries\": [
          {
            \"type\": \"MultiPolygon\",
            \"arcs\": [],
            \"id\": 53\n
          },
          {
            \"type\": \"MultiPolygon\",
            \"arcs\": [],
            \"id\": 30
          },
          {
            \"type\": \"MultiPolygon\",
            \"arcs\": [],
            \"id\": 16
          },
          {
            \"type\": \"MultiPolygon\",
            \"arcs\": [],
            \"id\": 38
          },
          {
            \"type\": \"MultiPolygon\",
            \"arcs\": [],
            \"id\": 27
          }
        ]
      },
      \"land\": {
        \"type\": \"MultiPolygon\",
        \"arcs\": []
      }
    },
    \"arcs\": [],
    \"transform\": {
      \"scale\": [
        0.0003589261789261791,
        0.0000537148685138684
      ],
      \"translate\": [
        -179.1473399999999,
        17.67439566600018
      ]
    }
  }"
}</code></pre></div>
            <p>You can notice that for each element the attribute <code>arcs</code> was empty not to have too much data.</p>
            <h2 id="data-sources" class="page-header">Data sources</h2>
            <p>This kind of sources provides general informations such as the URL and the type (JSON, CSV, TSV, ...).</p>
            <p>It also gives interesting informations that are useful when creating expressions at the layer level: the
structure, the number of rows, the minimum and maximum values for columns of type number and a sample. The
latter corresponds to the first five rows.</p>
            <p>Here is a sample of such sources:</p>
            <div class="highlight"><pre><code class="language-js" data-lang="js">{
  "id": "us-unemployment",
  "name": "US unemployment",
  "type": "data",
  "url": "https://mapapi.apispark.net/data/unemployment.tsv",
  "dataType": "tsv",
  "structure": "[
    \"id\",
    \"rate\"
  ]",
  "rowNumber": 3218,
  "minMax": "{
    \"id\": [
      \"1001\",
      \"72153\"
    ],
    \"rate\": [
      \".012\",
      \".301\"
    ]
  }",
  "sample": "[
    {
      \"id\": \"1001\",
      \"rate\": \".097\"
    },
    {
      \"id\": \"1003\",
      \"rate\": \".091\"
    },
    {
      \"id\": \"1005\",
      \"rate\": \".134\"
    },
    {
      \"id\": \"1007\",
      \"rate\": \".121\"
    },
    {
      \"id\": \"1009\",
      \"rate\": \".099\"
    }
  ]"
}</code></pre></div>
          </div>
        </div>
        <div id="right-nav" class="col-md-3" role="complementary">
          <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm">
            <ul class="nav bs-docs-sidenav">
              <li>
                <a href="#source-dsl">Source DSL</a>
                <ul class="nav">
                  <li><a href="#map-sources">Map sources</a></li>
                  <li><a href="#data-sources">Data sources</a></li>
                </ul>
              </li>
            </ul>
            <a class="back-to-top" href="#top">
              Back to top
            </a>
          </nav>

        </div>
      </div>
    </div>
    <!-- End content-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://getbootstrap.com/dist/js/bootstrap.min.js"></script>
    <script src="http://getbootstrap.com/assets/js/docs.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="http://getbootstrap.com/assets/js/ie10-viewport-bug-workaround.js"></script>

    <!--script>
      window.twttr = (function (d,s,id) {
        var t, js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return; js=d.createElement(s); js.id=id; js.async=1;
        js.src="https://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
        return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
      }(document, "script", "twitter-wjs"));
    </script -->

    <!-- Analytics
    ================================================== -->
    <script>
      /*var _gauges = _gauges || [];
      (function() {
        var t   = document.createElement('script');
        t.async = true;
        t.id    = 'gauges-tracker';
        t.setAttribute('data-site-id', '4f0dc9fef5a1f55508000013');
        t.src = '//secure.gaug.es/track.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(t, s);
      })();*/
    </script>
  </body>
</html>