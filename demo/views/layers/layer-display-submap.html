<div class="displaySubMap" ng-show="shouldDisplayElementArea(layer, 'display', 'subMap')"> <legend>Sub Map <div class="pull-right"><span ng-click="removeDisplayElementArea(layer, 'display', 'subMap')" class="glyphicon glyphicon-remove" aria-hidden="true"></span></div></legend> <field label="Layers"> <select class="form-control input-sm" name="layers" multiple ng-model="layer.display.subMap.layers"> <option ng-repeat="optionLayer in filteredLayers = (layers | filter: {id: '!layer.id'})" ng-selected="optionLayer.id === layer.applyOn" value="{{optionLayer.id}}">{{optionLayer.name}} </select> </field> <field label="Variables"> <select class="form-control input-sm" name="variables" multiple ng-model="layer.display.subMap.variables"> <option ng-selected="optionLayer.id === layer.applyOn" value="{{optionLayer.id}}">{{optionLayer.name}} </select> </field> <field label="Legend"> <div class="input-group" ng-if="shoudDisplayCheckExpression(layer.data.source)"> <input class="form-control input-sm" name="label" type="text" required ng-model="layer.display.subMap.legend.label" ng-model-options="{ updateOn: 'blur' }"> <span class="input-group-addon"><a ng-click="checkExpression(layer.display.subMap.legend, 'label', linkedSources, layer.data.source, layer.data.rootObject, layer.display.subMap.legend.label, 'Define sub map legend.')"><i class="glyphicon glyphicon-pencil"></i></a></span> </div> <input ng-if="!shoudDisplayCheckExpression(layer.data.source)" class="form-control input-sm" name="label" type="text" required ng-model="layer.display.subMap.legend.label" ng-model-options="{ updateOn: 'blur' }"> </field> </div>